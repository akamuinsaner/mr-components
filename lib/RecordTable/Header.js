var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var l,r=1,n=arguments.length;r<n;r++)for(var t in l=arguments[r])Object.prototype.hasOwnProperty.call(l,t)&&(e[t]=l[t]);return e}).apply(this,arguments)};import{jsx as _jsx,jsxs as _jsxs}from"react/jsx-runtime";import React from"react";import{TableHead,TableRow,TableCell,TableSortLabel,Checkbox}from"@mui/material";import{ArrowDownward}from"@mui/icons-material";import{MRTableContext}from".";import{getRowKey,getFixedStyle}from"./helper";import classNames from"classnames";import styles from"../index.module.css";import Filter from"./Filter";var RecordTableHeaderCell=function(e){var l,r=e.column,n=e.isSorting,t=e.sortDirection,a=e.onSortChange,o=e.fixed,s=e.columns,i=e.index,c=e.filterParams,d=e.onFilterChange,e=e.scrollingInfo,m=ArrowDownward,x=React.useContext(MRTableContext),f=x.expandable,g=x.rowSelection,h=x.sortInfo,u=x.filterInfo,x=x.scroll,b=!!r.sortable;if(0!==r.colSpan&&0!==r.rowSpan)return l={},x=null!=x&&x.x?getFixedStyle(o,s,r.key,null==f?void 0:f.fixed,null==g?void 0:g.fixed):{},l=Object.assign({},x,l),o=r.title,b&&(o=_jsx(TableSortLabel,__assign({active:b&&n,direction:n?t:"asc",IconComponent:null!=h&&h.sortIcon?null==h?void 0:h.sortIcon(r):m,onClick:function(){var e=r.key,l="asc";n?"asc"===t?l="desc":e="":l="asc",a(e,l)}},{children:r.title}))),(null!=u&&u.filters?null==u?void 0:u.filters(r,i):r.filters)&&(o=_jsx(Filter,__assign({column:r,index:i,onChange:function(e){var l;return d(((l={})[r.key]=e,l))},value:c[r.key]},{children:o}))),f=!e.scrollLeft&&"left"===r.fixed&&s[i+1]&&"left"!==s[i+1].fixed,g=!e.scrollRight&&"right"===r.fixed&&s[i-1]&&"right"!==s[i-1].fixed,_jsx(TableCell,__assign({align:r.align,colSpan:r.colSpan,rowSpan:r.rowSpan,width:r.width,sortDirection:!(!b||!n)&&t,sx:l,className:classNames(((x={})[styles["mr-table-header-no-border-right"]]=r.noBorderRight,x[styles["mr-table-column-scroll-left"]]=f,x[styles["mr-table-column-scroll-right"]]=g,x))},{children:o}))},RecordTableHeader=function(e){var i=e.sortParams,c=e.onSortChange,d=e.selectRowKeys,m=e.dataSource,l=e.onSelectAll,r=e.rowKey,n=e.isSticky,x=e.renderColumns,f=e.filterParams,g=e.onFilterChange,h=e.scrollingInfo,e=React.useContext(MRTableContext),u=e.expandable,b=e.rowSelection,p=function(e){e.target.checked?l(m.map(function(e,l){return getRowKey(e,r,l)}),m):l([],[])};return _jsx(TableHead,__assign({className:classNames(((e={})[styles["mr-table-header-sticky"]]=n,e))},{children:x.map(function(e,l){return _jsxs(TableRow,{children:[0===(s=l)&&u?(s=classNames(((s={})[styles["mr-table-expandable-fixed"]]=null==u?void 0:u.fixed,s)),_jsx(TableCell,{rowSpan:x.length,className:s,sx:{}})):null,0===(s=l)&&b?(s=b.columnTitle,r=void 0===(r=b.type)?"checkbox":r,n=b.hideSelectAll,a={},o=classNames(((o={})[styles["mr-table-selection-fixed"]]=null==b?void 0:b.fixed,o[styles["mr-table-selection-fixed-after-expand"]]=null==u?void 0:u.fixed,o)),_jsx(TableCell,s?__assign({sx:a,className:o},{children:s}):"checkbox"!==r||n?{padding:"checkbox",sx:a,className:o,rowSpan:x.length}:__assign({sx:a,padding:"checkbox",rowSpan:x.length,className:o},{children:_jsx(Checkbox,{checked:m.length===d.length,indeterminate:0<d.length&&d.length<m.length,onChange:p})}))):null,(t=e).map(function(e,l){var r=i.orderBy===e.key,n=i.order;return _jsx(RecordTableHeaderCell,{column:e,isSorting:r,sortDirection:n,onSortChange:c,fixed:e.fixed,columns:t,index:l,onFilterChange:g,filterParams:f,scrollingInfo:h},e.key)})]},l);var t,r,n,a,o,s})}))};export default RecordTableHeader;