var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var r,n=1,t=arguments.length;n<t;n++)for(var o in r=arguments[n])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e}).apply(this,arguments)};import{jsx as _jsx,jsxs as _jsxs}from"react/jsx-runtime";import React from"react";import{TableHead,TableRow,TableCell,TableSortLabel,Checkbox}from"@mui/material";import{ArrowDownward}from"@mui/icons-material";import{MRTableContext}from".";import{getRowKey,getFixedStyle}from"./helper";import classNames from"classnames";import styles from"../index.module.css";import Filter from"./Filter";var RecordTableHeaderCell=function(e){var r,n=e.column,t=e.isSorting,o=e.sortDirection,a=e.onSortChange,l=e.fixed,i=e.columns,s=e.index,c=e.filterParams,d=e.onFilterChange,e=ArrowDownward,m=React.useContext(MRTableContext),u=(m.expandable,m.rowSelection,m.sortInfo),m=(m.filterInfo,!!n.sortable);if(0!==n.colSpan&&0!==n.rowSpan)return r={},l=getFixedStyle(l,i,n.key),r=Object.assign({},l,r),_jsxs(TableCell,__assign({align:n.align,colSpan:n.colSpan,rowSpan:n.rowSpan,width:n.width,sortDirection:!(!m||!t)&&o,sx:r},{children:[m?_jsx(TableSortLabel,__assign({active:m&&t,direction:t?o:"asc",IconComponent:null!=u&&u.sortIcon?null==u?void 0:u.sortIcon(n):e,onClick:function(){var e=n.key,r="asc";t?"asc"===o?r="desc":e="":r="asc",a(e,r)}},{children:n.title})):n.title,_jsx(Filter,{column:n,index:s,onChange:function(e){var r;return d(((r={})[n.key]=e,r))},value:c[n.key]})]}))},RecordTableHeader=function(e){var l=e.sortParams,i=e.onSortChange,s=e.selectRowKeys,c=e.dataSource,r=e.onSelectAll,n=e.rowKey,t=e.isSticky,d=e.renderColumns,m=e.filterParams,u=e.onFilterChange,e=React.useContext(MRTableContext),h=e.expandable,x=e.rowSelection,g=function(e){e.target.checked?r(c.map(function(e,r){return getRowKey(e,n,r)}),c):r([],[])};return _jsx(TableHead,__assign({className:classNames(((e={})[styles["mr-table-header-sticky"]]=t,e))},{children:d.map(function(e,r){return _jsxs(TableRow,{children:[0===r&&h?_jsx(TableCell,{rowSpan:d.length}):null,0===(n=r)&&x?(n=x.columnTitle,t=x.type,a=x.hideSelectAll,_jsx(TableCell,n?{children:n}:"checkbox"!==t||a?{}:__assign({padding:"checkbox",rowSpan:d.length},{children:_jsx(Checkbox,{checked:c.length===s.length,indeterminate:0<s.length&&s.length<c.length,onChange:g})}))):null,(o=e).map(function(e,r){var n=l.orderBy===e.key,t=l.order;return _jsx(RecordTableHeaderCell,{column:e,isSorting:n,sortDirection:t,onSortChange:i,fixed:e.fixed,columns:o,index:r,onFilterChange:u,filterParams:m},e.key)})]},r);var o,n,t,a})}))};export default RecordTableHeader;