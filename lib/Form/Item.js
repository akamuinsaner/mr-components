var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},__read=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var a,n,i=r.call(e),l=[];try{for(;(void 0===t||0<t--)&&!(a=i.next()).done;)l.push(a.value)}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return l};import{jsx as _jsx}from"react/jsx-runtime";import React from"react";import{ruleCheck}from"./helpers";import{FormContext}from"./Form";import Grid from"@mui/material/Grid";var valueHelper=function(e,t){return t?e.target.checked:null!=e&&e.target&&null!==(null==(t=null==e?void 0:e.target)?void 0:t.value)?e.target.value:e},FormItem=function(e){function t(e){return e||(i?[]:!n&&"")}var r=e.name,a=e.checkable,n=void 0!==a&&a,i=e.multiple,a=e.children,l=e.rules,u=void 0===l?[]:l,l=e.gridProps,e=React.useContext(FormContext),o=e.instance,c=e.size,s=e.disabled,f=e.layout,d=e.gridProps.itemProps,e=e.fullWidth,m=React.useRef({}),_=__read(React.useState(t()),2),p=_[0],h=_[1],_=__read(React.useState(null),2),g=_[0],v=_[1],_=React.useCallback(function(e){v(e)},[]),R=React.useCallback(function(e){e=t(e);h(e)},[]),b=React.useCallback(function(){return p},[p]),y=React.useCallback(function(e){var t=C(p);v(t),e(t,p)},[p]),C=(m.current=__assign(__assign({},m.current),{setError:_,setValue:R,getValue:b,validate:y}),React.useEffect(function(){return o.wire(r,m),function(){o.unWire(r)}},[]),React.useEffect(function(){R(o.getFieldValue(r))},[]),React.useCallback(function(e){return u&&u.length?ruleCheck(r,e,u):""},[r])),_=React.useCallback(function(e){e=valueHelper(e,n);v(C(e)),h(e),o.setFieldValue(r,e)},[]),b=!!u.find(function(e){return e.required}),y={value:p,onChange:_,error:!!g,helperText:g,required:b,size:c,disabled:s},_="function"==typeof a?a(y):a,g=React.cloneElement(_,__assign(__assign({size:c,disabled:s,fullWidth:e},_.props),y));return"Grid"===f?_jsx(Grid,__assign({},d||{},l,{item:!0},{children:g})):g};export default FormItem;