var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},__read=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),l=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)l.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return l};import{jsx as _jsx}from"react/jsx-runtime";import React from"react";import{ruleCheck}from"./helpers";import{FormContext}from"./Form";import Grid from"@mui/material/Grid";var valueHelper=function(e,t){return t?e.target.checked:null!=e&&e.target&&null!==(null==(t=null==e?void 0:e.target)?void 0:t.value)?e.target.value:e},FormItem=function(e){function t(e){return e||(i?[]:!a&&"")}var r=e.name,n=e.checkable,a=void 0!==n&&n,i=e.multiple,n=e.children,l=e.rules,u=void 0===l?[]:l,l=e.gridProps,e=React.useRef(null),o=React.useContext(FormContext),c=o.instance,s=o.size,f=o.disabled,d=o.layout,m=o.gridProps.itemProps,o=o.fullWidth,_=React.useRef({}),p=__read(React.useState(t()),2),h=p[0],g=p[1],p=__read(React.useState(null),2),v=p[0],R=p[1],p=React.useCallback(function(e){R(e)},[]),b=React.useCallback(function(e){e=t(e);g(e)},[]),y=React.useCallback(function(){return h},[h]),C=React.useCallback(function(e){var t=k(h);R(t),e(t,h)},[h]),k=(_.current=__assign(__assign({},_.current),{element:e.current,setError:p,setValue:b,getValue:y,validate:C}),React.useEffect(function(){return c.wire(r,_),function(){c.unWire(r)}},[]),React.useEffect(function(){b(c.getFieldValue(r))},[]),React.useCallback(function(e){return u&&u.length?ruleCheck(r,e,u):""},[r])),p=React.useCallback(function(e){e=valueHelper(e,a);R(k(e)),g(e),c.setFieldValue(r,e)},[]),y=!!u.find(function(e){return e.required}),C={value:h,onChange:p,error:!!v,helperText:v,required:y,size:s,disabled:f},p="function"==typeof n?n(C):n,v=React.cloneElement(p,__assign(__assign({ref:e,size:s,disabled:f,fullWidth:o},p.props),C));return"Grid"===d?_jsx(Grid,__assign({},m||{},l,{item:!0},{children:v})):v};export default FormItem;