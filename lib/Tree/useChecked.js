var __read=this&&this.__read||function(r,e){var a="function"==typeof Symbol&&r[Symbol.iterator];if(!a)return r;var t,n,_=a.call(r),d=[];try{for(;(void 0===e||0<e--)&&!(t=_.next()).done;)d.push(t.value)}catch(r){n={error:r}}finally{try{t&&!t.done&&(a=_.return)&&a.call(_)}finally{if(n)throw n.error}}return d},__spreadArray=this&&this.__spreadArray||function(r,e,a){if(a||2===arguments.length)for(var t,n=0,_=e.length;n<_;n++)!t&&n in e||((t=t||Array.prototype.slice.call(e,0,n))[n]=e[n]);return r.concat(t||Array.prototype.slice.call(e))};import React from"react";export default function(r){function a(e,r,a){var t,n=(a=void 0===a?!1:a)?[]:__spreadArray([],__read(u),!1);if(d?(t=__spreadArray([e.id],__read(c.get(e.id)),!1),n=r?__spreadArray([],__read(new Set(__spreadArray(__spreadArray([],__read(n),!1),__read(t),!1))),!1):n.filter(function(r){return!t.includes(r)}),f.get(e.id).forEach(function(e){r?c.get(e).find(function(r){return!n.includes(r)})||(n=__spreadArray(__spreadArray([],__read(n),!1),[e],!1)):n=n.filter(function(r){return r!==e})})):n=r?__spreadArray(__spreadArray([],__read(n),!1),[e.id],!1):n.filter(function(r){return r!==e.id}),a)return n;i&&i(n,r,e),_||l(n)}var e=r.dataSet,_=r.checkedKeys,d=r.checkWithRelation,t=r.defaultCheckedKeys,n=r.defaultCheckedAll,i=r.onCheck,c=e.idChildrenIdMap,f=e.parentChainMap,o=e.flattedData,r=__read(React.useState([]),2),u=r[0],l=r[1];return React.useEffect(function(){return l(t?(r=o.filter(function(r){return t.includes(r.id)}),e=[],r.forEach(function(r){r=new Set(__spreadArray(__spreadArray([],__read(e),!1),__read(a(r,!0,!0)),!1));e=__spreadArray([],__read(r),!1)}),e):n?o.map(function(r){return r.id}):[]);var r,e},[]),React.useEffect(function(){var r,e;_&&(r=o.filter(function(r){return _.includes(r.id)}),e=[],r.forEach(function(r){r=new Set(__spreadArray(__spreadArray([],__read(e),!1),__read(a(r,!0,!0)),!1));e=__spreadArray([],__read(r),!1)}),l(d?e:_))},[_]),{checkKeys:u,setCheckKeys:l,toggleCheck:a}}