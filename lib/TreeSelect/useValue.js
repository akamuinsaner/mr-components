var __read=this&&this.__read||function(r,e){var a="function"==typeof Symbol&&r[Symbol.iterator];if(!a)return r;var t,n,i=a.call(r),_=[];try{for(;(void 0===e||0<e--)&&!(t=i.next()).done;)_.push(t.value)}catch(r){n={error:r}}finally{try{t&&!t.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}return _},__spreadArray=this&&this.__spreadArray||function(r,e,a){if(a||2===arguments.length)for(var t,n=0,i=e.length;n<i;n++)!t&&n in e||((t=t||Array.prototype.slice.call(e,0,n))[n]=e[n]);return r.concat(t||Array.prototype.slice.call(e))};import React from"react";export default function(r){function e(r){return Array.isArray(r)?r:r?[r]:[]}function n(r){i&&i(t?r:r[0]),a||l(r)}var a=r.value,t=r.multiple,i=r.onChange,_=r.dataSet,d=r.checkWithRelation,o=_.idChildrenIdMap,c=_.parentChainMap,r=__read(React.useState(e(a)),2),u=r[0],l=r[1];React.useEffect(function(){a&&e(a)},[a]);return{selected:u,toggleCheck:function(e,r){var a,t=__spreadArray([],__read(u),!1);d?(a=__spreadArray([e.id],__read(o.get(e.id)),!1),t=r?__spreadArray([],__read(new Set(__spreadArray(__spreadArray([],__read(t),!1),__read(a),!1))),!1):t.filter(function(r){return!a.includes(r)}),c.get(e.id).forEach(function(e){r?o.get(e).find(function(r){return!t.includes(r)})||(t=__spreadArray(__spreadArray([],__read(t),!1),[e],!1)):t=t.filter(function(r){return r!==e})})):t=r?__spreadArray(__spreadArray([],__read(t),!1),[e.id],!1):t.filter(function(r){return r!==e.id}),n(t)},onValueChange:n,onOptionSelect:function(e){t?u.includes(e.id)?n(u.filter(function(r){return r!==e.id})):n(__spreadArray(__spreadArray([],__read(u),!1),[e.id],!1)):n([e.id])}}}