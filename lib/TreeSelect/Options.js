var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i]);return r}).apply(this,arguments)},__read=this&&this.__read||function(r,t){var e="function"==typeof Symbol&&r[Symbol.iterator];if(!e)return r;var n,i,a=e.call(r),o=[];try{for(;(void 0===t||0<t--)&&!(n=a.next()).done;)o.push(n.value)}catch(r){i={error:r}}finally{try{n&&!n.done&&(e=a.return)&&e.call(a)}finally{if(i)throw i.error}}return o},__spreadArray=this&&this.__spreadArray||function(r,t,e){if(e||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||((n=n||Array.prototype.slice.call(t,0,i))[i]=t[i]);return r.concat(n||Array.prototype.slice.call(t))},__values=this&&this.__values||function(r){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&"number"==typeof r.length)return{next:function(){return{value:(r=r&&n>=r.length?void 0:r)&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};import{jsx as _jsx,jsxs as _jsxs}from"react/jsx-runtime";import React from"react";import ListItem from"@mui/material/ListItem";import Typography from"@mui/material/ListItem";import Check from"./Check";import ExpandIcon from"./ExpandIcon";export default function(r){function u(t,c){void 0===t&&(t=""),void 0===c&&(c=0);var r=y.filter(function(r){return r.parentId===t});return e&&l&&(r=function(r){var t,e,n=[];try{for(var i=__values(g.entries()),a=i.next();!a.done;a=i.next()){var o=__read(a.value,2),s=o[0];o[1].filter(function(r){return-1<"".concat(r.name).indexOf(l)}).length&&n.push(s)}}catch(r){t={error:r}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return r.filter(function(r){return n.includes(r.id)||-1<"".concat(r.name).indexOf(l)})}(r)),__spreadArray([],__read(r.map(function(t){var e,r,n,i,a,o=y.filter(function(r){return r.parentId===t.id}),s=o&&o.length,l=x.includes(t.id),d=[(e=t,d=c,o=o,r=h.includes(e.id),o=o&&o.length,n=x.includes(e.id),i=b===e.id,a=o||!!v,_jsxs(ListItem,__assign({sx:{paddingLeft:"".concat(20*d+16,"px"),cursor:"pointer"},dense:f,selected:r,onClick:function(r){p&&r.stopPropagation(),C(e)}},{children:[_jsx(ExpandIcon,{hasChildren:o,showChildren:n,isLoading:i,visibility:a,onExpandChange:function(){return j(e.id)},startLoadData:function(){return I(e)}}),_jsx(Check,{option:e,show:_,selected:h,setSelected:m,allChildrenMap:g}),_jsx(Typography,{children:e.name})]}),e.id))];return d=l&&s?__spreadArray(__spreadArray([],__read(d),!1),__read(u(t.id,c+1)),!1):d})),!1)}var f=r.dense,_=r.showCheck,e=r.search,p=r.multiple,h=r.selected,l=r.inputValue,y=r.flatOptions,m=r.setSelected,g=r.allChildrenMap,n=r.setFlattedOptions,v=r.loadData,x=r.expandKeys,j=r.toggleExpand,r=__read(React.useState(null),2),b=r[0],t=r[1],C=function(t){p?h.includes(t.id)?m(h.filter(function(r){return r!==t.id})):m(__spreadArray(__spreadArray([],__read(h),!1),[t.id],!1)):m([t.id])},I=function(e){v&&(t(e.id),v(e).then(function(t){n(y.map(function(r){return r.id===e.id?__assign(__assign({},r),{children:t}):r}).concat(t.map(function(r){return __assign(__assign({},r),{parentId:e.id})}))),j(e.id)}).finally(function(){t(null)}))};return u()}