var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++)for(var a in e=arguments[t])Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r}).apply(this,arguments)},__read=this&&this.__read||function(r,e){var t="function"==typeof Symbol&&r[Symbol.iterator];if(!t)return r;var n,a,i=t.call(r),o=[];try{for(;(void 0===e||0<e--)&&!(n=i.next()).done;)o.push(n.value)}catch(r){a={error:r}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(a)throw a.error}}return o},__values=this&&this.__values||function(r){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&"number"==typeof r.length)return{next:function(){return{value:(r=r&&n>=r.length?void 0:r)&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},__spreadArray=this&&this.__spreadArray||function(r,e,t){if(t||2===arguments.length)for(var n,a=0,i=e.length;a<i;a++)!n&&a in e||((n=n||Array.prototype.slice.call(e,0,a))[a]=e[a]);return r.concat(n||Array.prototype.slice.call(e))};import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from"react/jsx-runtime";import React from"react";import ListItem from"@mui/material/ListItem";import Typography from"@mui/material/ListItem";import Check from"./Check";import ExpandIcon from"./ExpandIcon";import{RESERVED_KEY}from"../utils/getTreeDataFormatted";export default function(r){var s=r.dense,d=r.showCheck,t=r.search,c=r.multiple,u=r.selected,p=r.inputValue,f=r.setSelected,h=r.loadData,_=r.expandKeys,m=r.toggleExpand,e=r.dataSet,y=r.checkWithRelation,r=__read(React.useState(null),2),v=r[0],x=r[1],n=e.flattedData,g=e.idChildrenMap,E=e.idChildrenIdMap,j=(e.idTreeNodeMap,e.parentChainMap),C=function(e,l){void 0===e&&(e=RESERVED_KEY),void 0===l&&(l=0);var r=n.filter(function(r){return r.parentId===e});return(r=t&&p?function(r){var e,t,n=[];try{for(var a=__values(g.entries()),i=a.next();!i.done;i=a.next()){var o=__read(i.value,2),l=o[0];!!o[1].find(function(r){return"".concat(r.name).includes(p)})&&n.push(l)}}catch(r){e={error:r}}finally{try{i&&!i.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return r.filter(function(r){return n.includes(r.id)||-1<"".concat(r.name).indexOf(p)})}(r):r).map(function(t){var r=t.id,e=u.includes(r),n=!(!t.children||!t.children.length),a=_.includes(r),i=v===r,o=n||!!h;return __spreadArray([_jsxs(ListItem,__assign({sx:{paddingLeft:"".concat(20*l+16,"px"),cursor:"pointer"},dense:s,selected:e,onClick:function(r){var e;c&&r.stopPropagation(),e=t,c?u.includes(e.id)?f(u.filter(function(r){return r!==e.id})):f(__spreadArray(__spreadArray([],__read(u),!1),[e.id],!1)):f([e.id])}},{children:[_jsx(ExpandIcon,{hasChildren:n,showChildren:a,isLoading:i,visibility:o,onExpandChange:function(){return m(r)},startLoadData:function(){var e;e=t,h&&(x(e.id),h(e).then(function(r){m(e.id)}).finally(function(){x(null)}))}}),_jsx(Check,{option:t,show:d,selected:u,setSelected:f,parentChainMap:j,idChildrenIdMap:E,checkWithRelation:y}),_jsx(Typography,{children:t.name})]}),r)],__read((e=r,n=l+1,a?C(e,n):[])),!1)})};return _jsxs(_Fragment,{children:__spreadArray([],__read(C()),!1)})}